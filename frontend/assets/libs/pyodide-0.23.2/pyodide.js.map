{"version":3,"file":"pyodide.js","sources":["../src/js/node_modules/stackframe/stackframe.js","../src/js/node_modules/error-stack-parser/error-stack-parser.js","../src/js/compat.ts","../src/js/node_modules/tslib/tslib.es6.js","../src/js/nativefs.ts","../src/js/module.ts","../src/js/pyodide.ts","../src/js/version.ts","../src/js/pyodide.umd.ts"],"sourcesContent":["(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function() {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.substring(1);\n    }\n\n    function _getter(p) {\n        return function() {\n            return this[p];\n        };\n    }\n\n    var booleanProps = ['isConstructor', 'isEval', 'isNative', 'isToplevel'];\n    var numericProps = ['columnNumber', 'lineNumber'];\n    var stringProps = ['fileName', 'functionName', 'source'];\n    var arrayProps = ['args'];\n    var objectProps = ['evalOrigin'];\n\n    var props = booleanProps.concat(numericProps, stringProps, arrayProps, objectProps);\n\n    function StackFrame(obj) {\n        if (!obj) return;\n        for (var i = 0; i < props.length; i++) {\n            if (obj[props[i]] !== undefined) {\n                this['set' + _capitalize(props[i])](obj[props[i]]);\n            }\n        }\n    }\n\n    StackFrame.prototype = {\n        getArgs: function() {\n            return this.args;\n        },\n        setArgs: function(v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        getEvalOrigin: function() {\n            return this.evalOrigin;\n        },\n        setEvalOrigin: function(v) {\n            if (v instanceof StackFrame) {\n                this.evalOrigin = v;\n            } else if (v instanceof Object) {\n                this.evalOrigin = new StackFrame(v);\n            } else {\n                throw new TypeError('Eval Origin must be an Object or StackFrame');\n            }\n        },\n\n        toString: function() {\n            var fileName = this.getFileName() || '';\n            var lineNumber = this.getLineNumber() || '';\n            var columnNumber = this.getColumnNumber() || '';\n            var functionName = this.getFunctionName() || '';\n            if (this.getIsEval()) {\n                if (fileName) {\n                    return '[eval] (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n                }\n                return '[eval]:' + lineNumber + ':' + columnNumber;\n            }\n            if (functionName) {\n                return functionName + ' (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n            }\n            return fileName + ':' + lineNumber + ':' + columnNumber;\n        }\n    };\n\n    StackFrame.fromString = function StackFrame$$fromString(str) {\n        var argsStartIndex = str.indexOf('(');\n        var argsEndIndex = str.lastIndexOf(')');\n\n        var functionName = str.substring(0, argsStartIndex);\n        var args = str.substring(argsStartIndex + 1, argsEndIndex).split(',');\n        var locationString = str.substring(argsEndIndex + 1);\n\n        if (locationString.indexOf('@') === 0) {\n            var parts = /@(.+?)(?::(\\d+))?(?::(\\d+))?$/.exec(locationString, '');\n            var fileName = parts[1];\n            var lineNumber = parts[2];\n            var columnNumber = parts[3];\n        }\n\n        return new StackFrame({\n            functionName: functionName,\n            args: args || undefined,\n            fileName: fileName,\n            lineNumber: lineNumber || undefined,\n            columnNumber: columnNumber || undefined\n        });\n    };\n\n    for (var i = 0; i < booleanProps.length; i++) {\n        StackFrame.prototype['get' + _capitalize(booleanProps[i])] = _getter(booleanProps[i]);\n        StackFrame.prototype['set' + _capitalize(booleanProps[i])] = (function(p) {\n            return function(v) {\n                this[p] = Boolean(v);\n            };\n        })(booleanProps[i]);\n    }\n\n    for (var j = 0; j < numericProps.length; j++) {\n        StackFrame.prototype['get' + _capitalize(numericProps[j])] = _getter(numericProps[j]);\n        StackFrame.prototype['set' + _capitalize(numericProps[j])] = (function(p) {\n            return function(v) {\n                if (!_isNumber(v)) {\n                    throw new TypeError(p + ' must be a Number');\n                }\n                this[p] = Number(v);\n            };\n        })(numericProps[j]);\n    }\n\n    for (var k = 0; k < stringProps.length; k++) {\n        StackFrame.prototype['get' + _capitalize(stringProps[k])] = _getter(stringProps[k]);\n        StackFrame.prototype['set' + _capitalize(stringProps[k])] = (function(p) {\n            return function(v) {\n                this[p] = String(v);\n            };\n        })(stringProps[k]);\n    }\n\n    return StackFrame;\n}));\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[()]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^()]*)|(,.*$)/g, '');\n                }\n                var sanitizedLine = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').replace(/^.*?\\s+/, '');\n\n                // capture and preseve the parenthesized location \"(/foo/my bar.js:12:87)\" in\n                // case it has spaces in it, as the string is split on \\s+ later on\n                var location = sanitizedLine.match(/ (\\(.+\\)$)/);\n\n                // remove the parenthesized location from the line, if it was matched\n                sanitizedLine = location ? sanitizedLine.replace(location[0], '') : sanitizedLine;\n\n                // if a location was matched, pass it to extractLocation() otherwise pass all sanitizedLine\n                // because this line doesn't have function name\n                var locationParts = this.extractLocation(location ? location[1] : sanitizedLine);\n                var functionName = location && sanitizedLine || undefined;\n                var fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame({\n                    functionName: functionName,\n                    fileName: fileName,\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame({\n                        functionName: line\n                    });\n                } else {\n                    var functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\n                    var matches = line.match(functionNameRegex);\n                    var functionName = matches && matches[1] ? matches[1] : undefined;\n                    var locationParts = this.extractLocation(line.replace(functionNameRegex, ''));\n\n                    return new StackFrame({\n                        functionName: functionName,\n                        fileName: locationParts[0],\n                        lineNumber: locationParts[1],\n                        columnNumber: locationParts[2],\n                        source: line\n                    });\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame({\n                        fileName: match[2],\n                        lineNumber: match[1],\n                        source: lines[i]\n                    }));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame({\n                            functionName: match[3] || undefined,\n                            fileName: match[2],\n                            lineNumber: match[1],\n                            source: lines[i]\n                        })\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return filtered.map(function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                    .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                    .replace(/\\([^)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^(]+\\(([^)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n\n                return new StackFrame({\n                    functionName: functionName,\n                    args: args,\n                    fileName: locationParts[0],\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        }\n    };\n}));\n","// Detect if we're in node\ndeclare var process: any;\n\nexport const IN_NODE =\n  typeof process === \"object\" &&\n  typeof process.versions === \"object\" &&\n  typeof process.versions.node === \"string\" &&\n  typeof process.browser ===\n    \"undefined\"; /* This last condition checks if we run the browser shim of process */\n\nlet nodeUrlMod: any;\nlet nodeFetch: any;\nlet nodePath: any;\nlet nodeVmMod: any;\n/** @private */\nexport let nodeFsPromisesMod: any;\n\ndeclare var globalThis: {\n  importScripts: (url: string) => void;\n  document?: any;\n  fetch?: any;\n};\n\n/**\n * If we're in node, it's most convenient to import various node modules on\n * initialization. Otherwise, this does nothing.\n * @private\n */\nexport async function initNodeModules() {\n  if (!IN_NODE) {\n    return;\n  }\n  // @ts-ignore\n  nodeUrlMod = (await import(\"url\")).default;\n  nodeFsPromisesMod = await import(\"fs/promises\");\n  if (globalThis.fetch) {\n    nodeFetch = fetch;\n  } else {\n    // @ts-ignore\n    nodeFetch = (await import(\"node-fetch\")).default;\n  }\n  // @ts-ignore\n  nodeVmMod = (await import(\"vm\")).default;\n  nodePath = await import(\"path\");\n  pathSep = nodePath.sep;\n\n  // Emscripten uses `require`, so if it's missing (because we were imported as\n  // an ES6 module) we need to polyfill `require` with `import`. `import` is\n  // async and `require` is synchronous, so we import all packages that might be\n  // required up front and define require to look them up in this table.\n\n  if (typeof require !== \"undefined\") {\n    return;\n  }\n  // These are all the packages required in pyodide.asm.js. You can get this\n  // list with:\n  // $ grep -o 'require(\"[a-z]*\")' pyodide.asm.js  | sort -u\n  const fs = await import(\"fs\");\n  const crypto = await import(\"crypto\");\n  const ws = await import(\"ws\");\n  const child_process = await import(\"child_process\");\n  const node_modules: { [mode: string]: any } = {\n    fs,\n    crypto,\n    ws,\n    child_process,\n  };\n  // Since we're in an ES6 module, this is only modifying the module namespace,\n  // it's still private to Pyodide.\n  (globalThis as any).require = function (mod: string): any {\n    return node_modules[mod];\n  };\n}\n\nfunction node_resolvePath(path: string, base?: string): string {\n  return nodePath.resolve(base || \".\", path);\n}\n\nfunction browser_resolvePath(path: string, base?: string): string {\n  if (base === undefined) {\n    // @ts-ignore\n    base = location;\n  }\n  return new URL(path, base).toString();\n}\n\nexport let resolvePath: (rest: string, base?: string) => string;\nif (IN_NODE) {\n  resolvePath = node_resolvePath;\n} else {\n  resolvePath = browser_resolvePath;\n}\n\n/**\n * Get the path separator. If we are on Linux or in the browser, it's /.\n * In Windows, it's \\.\n * @private\n */\nexport let pathSep: string;\n\nif (!IN_NODE) {\n  pathSep = \"/\";\n}\n\n/**\n * Load a binary file, only for use in Node. If the path explicitly is a URL,\n * then fetch from a URL, else load from the file system.\n * @param indexURL base path to resolve relative paths\n * @param path the path to load\n * @param checksum sha-256 checksum of the package\n * @returns An ArrayBuffer containing the binary data\n * @private\n */\nasync function node_loadBinaryFile(\n  path: string,\n  _file_sub_resource_hash?: string | undefined, // Ignoring sub resource hash. See issue-2431.\n): Promise<Uint8Array> {\n  if (path.startsWith(\"file://\")) {\n    // handle file:// with filesystem operations rather than with fetch.\n    path = path.slice(\"file://\".length);\n  }\n  if (path.includes(\"://\")) {\n    // If it has a protocol, make a fetch request\n    let response = await nodeFetch(path);\n    if (!response.ok) {\n      throw new Error(`Failed to load '${path}': request failed.`);\n    }\n    return new Uint8Array(await response.arrayBuffer());\n  } else {\n    // Otherwise get it from the file system\n    const data = await nodeFsPromisesMod.readFile(path);\n    return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n  }\n}\n\n/**\n * Load a binary file, only for use in browser. Resolves relative paths against\n * indexURL.\n *\n * @param path the path to load\n * @param subResourceHash the sub resource hash for fetch() integrity check\n * @returns A Uint8Array containing the binary data\n * @private\n */\nasync function browser_loadBinaryFile(\n  path: string,\n  subResourceHash: string | undefined,\n): Promise<Uint8Array> {\n  // @ts-ignore\n  const url = new URL(path, location);\n  let options = subResourceHash ? { integrity: subResourceHash } : {};\n  // @ts-ignore\n  let response = await fetch(url, options);\n  if (!response.ok) {\n    throw new Error(`Failed to load '${url}': request failed.`);\n  }\n  return new Uint8Array(await response.arrayBuffer());\n}\n\n/** @private */\nexport let loadBinaryFile: (\n  path: string,\n  file_sub_resource_hash?: string | undefined,\n) => Promise<Uint8Array>;\nif (IN_NODE) {\n  loadBinaryFile = node_loadBinaryFile;\n} else {\n  loadBinaryFile = browser_loadBinaryFile;\n}\n\n/**\n * Currently loadScript is only used once to load `pyodide.asm.js`.\n * @param url\n * @async\n * @private\n */\nexport let loadScript: (url: string) => Promise<void>;\n\nif (globalThis.document) {\n  // browser\n  loadScript = async (url) => await import(/* webpackIgnore: true */ url);\n} else if (globalThis.importScripts) {\n  // webworker\n  loadScript = async (url) => {\n    try {\n      // use importScripts in classic web worker\n      globalThis.importScripts(url);\n    } catch (e) {\n      // importScripts throws TypeError in a module type web worker, use import instead\n      if (e instanceof TypeError) {\n        await import(/* webpackIgnore: true */ url);\n      } else {\n        throw e;\n      }\n    }\n  };\n} else if (IN_NODE) {\n  loadScript = nodeLoadScript;\n} else {\n  throw new Error(\"Cannot determine runtime environment\");\n}\n\n/**\n * Load a text file and executes it as Javascript\n * @param url The path to load. May be a url or a relative file system path.\n * @private\n */\nasync function nodeLoadScript(url: string) {\n  if (url.startsWith(\"file://\")) {\n    // handle file:// with filesystem operations rather than with fetch.\n    url = url.slice(\"file://\".length);\n  }\n  if (url.includes(\"://\")) {\n    // If it's a url, load it with fetch then eval it.\n    nodeVmMod.runInThisContext(await (await nodeFetch(url)).text());\n  } else {\n    // Otherwise, hopefully it is a relative path we can load from the file\n    // system.\n    await import(/* webpackIgnore: true */ nodeUrlMod.pathToFileURL(url).href);\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { Module } from \"./module\";\n\n/**\n * @private\n */\nexport function initializeNativeFS(module: Module) {\n  const FS = module.FS;\n  const MEMFS = module.FS.filesystems.MEMFS;\n  const PATH = module.PATH;\n\n  const nativeFSAsync = {\n    // DIR_MODE: {{{ cDefine('S_IFDIR') }}} | 511 /* 0777 */,\n    // FILE_MODE: {{{ cDefine('S_IFREG') }}} | 511 /* 0777 */,\n    DIR_MODE: 16384 | 511,\n    FILE_MODE: 32768 | 511,\n    mount: function (mount: any) {\n      if (!mount.opts.fileSystemHandle) {\n        throw new Error(\"opts.fileSystemHandle is required\");\n      }\n\n      // reuse all of the core MEMFS functionality\n      return MEMFS.mount.apply(null, arguments);\n    },\n    syncfs: async (mount: any, populate: Boolean, callback: Function) => {\n      try {\n        const local = nativeFSAsync.getLocalSet(mount);\n        const remote = await nativeFSAsync.getRemoteSet(mount);\n        const src = populate ? remote : local;\n        const dst = populate ? local : remote;\n        await nativeFSAsync.reconcile(mount, src, dst);\n        callback(null);\n      } catch (e) {\n        callback(e);\n      }\n    },\n    // Returns file set of emscripten's filesystem at the mountpoint.\n    getLocalSet: (mount: any) => {\n      let entries = Object.create(null);\n\n      function isRealDir(p: string) {\n        return p !== \".\" && p !== \"..\";\n      }\n\n      function toAbsolute(root: string) {\n        return (p: string) => {\n          return PATH.join2(root, p);\n        };\n      }\n\n      let check = FS.readdir(mount.mountpoint)\n        .filter(isRealDir)\n        .map(toAbsolute(mount.mountpoint));\n\n      while (check.length) {\n        let path = check.pop();\n        let stat = FS.stat(path);\n\n        if (FS.isDir(stat.mode)) {\n          check.push.apply(\n            check,\n            FS.readdir(path).filter(isRealDir).map(toAbsolute(path)),\n          );\n        }\n\n        entries[path] = { timestamp: stat.mtime, mode: stat.mode };\n      }\n\n      return { type: \"local\", entries: entries };\n    },\n    // Returns file set of the real, on-disk filesystem at the mountpoint.\n    getRemoteSet: async (mount: any) => {\n      // TODO: this should be a map.\n      const entries = Object.create(null);\n\n      const handles = await getFsHandles(mount.opts.fileSystemHandle);\n      for (const [path, handle] of handles) {\n        if (path === \".\") continue;\n\n        entries[PATH.join2(mount.mountpoint, path)] = {\n          timestamp:\n            handle.kind === \"file\"\n              ? (await handle.getFile()).lastModifiedDate\n              : new Date(),\n          mode:\n            handle.kind === \"file\"\n              ? nativeFSAsync.FILE_MODE\n              : nativeFSAsync.DIR_MODE,\n        };\n      }\n\n      return { type: \"remote\", entries, handles };\n    },\n    loadLocalEntry: (path: string) => {\n      const lookup = FS.lookupPath(path);\n      const node = lookup.node;\n      const stat = FS.stat(path);\n\n      if (FS.isDir(stat.mode)) {\n        return { timestamp: stat.mtime, mode: stat.mode };\n      } else if (FS.isFile(stat.mode)) {\n        node.contents = MEMFS.getFileDataAsTypedArray(node);\n        return {\n          timestamp: stat.mtime,\n          mode: stat.mode,\n          contents: node.contents,\n        };\n      } else {\n        throw new Error(\"node type not supported\");\n      }\n    },\n    storeLocalEntry: (path: string, entry: any) => {\n      if (FS.isDir(entry[\"mode\"])) {\n        FS.mkdirTree(path, entry[\"mode\"]);\n      } else if (FS.isFile(entry[\"mode\"])) {\n        FS.writeFile(path, entry[\"contents\"], { canOwn: true });\n      } else {\n        throw new Error(\"node type not supported\");\n      }\n\n      FS.chmod(path, entry[\"mode\"]);\n      FS.utime(path, entry[\"timestamp\"], entry[\"timestamp\"]);\n    },\n    removeLocalEntry: (path: string) => {\n      var stat = FS.stat(path);\n\n      if (FS.isDir(stat.mode)) {\n        FS.rmdir(path);\n      } else if (FS.isFile(stat.mode)) {\n        FS.unlink(path);\n      }\n    },\n    loadRemoteEntry: async (handle: any) => {\n      if (handle.kind === \"file\") {\n        const file = await handle.getFile();\n        return {\n          contents: new Uint8Array(await file.arrayBuffer()),\n          mode: nativeFSAsync.FILE_MODE,\n          timestamp: file.lastModifiedDate,\n        };\n      } else if (handle.kind === \"directory\") {\n        return {\n          mode: nativeFSAsync.DIR_MODE,\n          timestamp: new Date(),\n        };\n      } else {\n        throw new Error(\"unknown kind: \" + handle.kind);\n      }\n    },\n    storeRemoteEntry: async (handles: any, path: string, entry: any) => {\n      const parentDirHandle = handles.get(PATH.dirname(path));\n      const handle = FS.isFile(entry.mode)\n        ? await parentDirHandle.getFileHandle(PATH.basename(path), {\n            create: true,\n          })\n        : await parentDirHandle.getDirectoryHandle(PATH.basename(path), {\n            create: true,\n          });\n      if (handle.kind === \"file\") {\n        const writable = await handle.createWritable();\n        await writable.write(entry.contents);\n        await writable.close();\n      }\n      handles.set(path, handle);\n    },\n    removeRemoteEntry: async (handles: any, path: string) => {\n      const parentDirHandle = handles.get(PATH.dirname(path));\n      await parentDirHandle.removeEntry(PATH.basename(path));\n      handles.delete(path);\n    },\n    reconcile: async (mount: any, src: any, dst: any) => {\n      let total = 0;\n\n      const create: Array<string> = [];\n      Object.keys(src.entries).forEach(function (key) {\n        const e = src.entries[key];\n        const e2 = dst.entries[key];\n        if (\n          !e2 ||\n          (FS.isFile(e.mode) &&\n            e[\"timestamp\"].getTime() > e2[\"timestamp\"].getTime())\n        ) {\n          create.push(key);\n          total++;\n        }\n      });\n      // sort paths in ascending order so directory entries are created\n      // before the files inside them\n      create.sort();\n\n      const remove: Array<string> = [];\n      Object.keys(dst.entries).forEach(function (key) {\n        if (!src.entries[key]) {\n          remove.push(key);\n          total++;\n        }\n      });\n      // sort paths in descending order so files are deleted before their\n      // parent directories\n      remove.sort().reverse();\n\n      if (!total) {\n        return;\n      }\n\n      const handles = src.type === \"remote\" ? src.handles : dst.handles;\n\n      for (const path of create) {\n        const relPath = PATH.normalize(\n          path.replace(mount.mountpoint, \"/\"),\n        ).substring(1);\n        if (dst.type === \"local\") {\n          const handle = handles.get(relPath);\n          const entry = await nativeFSAsync.loadRemoteEntry(handle);\n          nativeFSAsync.storeLocalEntry(path, entry);\n        } else {\n          const entry = nativeFSAsync.loadLocalEntry(path);\n          await nativeFSAsync.storeRemoteEntry(handles, relPath, entry);\n        }\n      }\n\n      for (const path of remove) {\n        if (dst.type === \"local\") {\n          nativeFSAsync.removeLocalEntry(path);\n        } else {\n          const relPath = PATH.normalize(\n            path.replace(mount.mountpoint, \"/\"),\n          ).substring(1);\n          await nativeFSAsync.removeRemoteEntry(handles, relPath);\n        }\n      }\n    },\n  };\n\n  module.FS.filesystems.NATIVEFS_ASYNC = nativeFSAsync;\n}\n\nconst getFsHandles = async (dirHandle: any) => {\n  const handles: any = [];\n\n  async function collect(curDirHandle: any) {\n    for await (const entry of curDirHandle.values()) {\n      handles.push(entry);\n      if (entry.kind === \"directory\") {\n        await collect(entry);\n      }\n    }\n  }\n\n  await collect(dirHandle);\n\n  const result = new Map();\n  result.set(\".\", dirHandle);\n  for (const handle of handles) {\n    const relativePath = (await dirHandle.resolve(handle)).join(\"/\");\n    result.set(relativePath, handle);\n  }\n  return result;\n};\n","/** @private */\n\nimport { ConfigType } from \"./pyodide\";\nimport { initializeNativeFS } from \"./nativefs\";\nimport { loadBinaryFile } from \"./compat\";\n\ntype FSNode = any;\ntype FSStream = any;\n\nexport interface FS {\n  unlink: (path: string) => void;\n  mkdirTree: (path: string, mode?: number) => void;\n  chdir: (path: string) => void;\n  symlink: (target: string, src: string) => FSNode;\n  createDevice: (\n    parent: string,\n    name: string,\n    input?: (() => number | null) | null,\n    output?: ((code: number) => void) | null,\n  ) => FSNode;\n  closeStream: (fd: number) => void;\n  open: (path: string, flags: string | number, mode?: number) => FSStream;\n  makedev: (major: number, minor: number) => number;\n  mkdev: (path: string, dev: number) => FSNode;\n  filesystems: any;\n  stat: (path: string, dontFollow?: boolean) => any;\n  readdir: (node: FSNode) => string[];\n  isDir: (mode: number) => boolean;\n  lookupPath: (path: string) => FSNode;\n  isFile: (mode: number) => boolean;\n  writeFile: (path: string, contents: any, o?: { canOwn?: boolean }) => void;\n  chmod: (path: string, mode: number) => void;\n  utime: (path: string, atime: number, mtime: number) => void;\n  rmdir: (path: string) => void;\n  mount: (type: any, opts: any, mountpoint: string) => any;\n  write: (\n    stream: FSStream,\n    buffer: any,\n    offset: number,\n    length: number,\n    position?: number,\n  ) => number;\n  close: (stream: FSStream) => void;\n}\n\nexport interface Module {\n  noImageDecoding: boolean;\n  noAudioDecoding: boolean;\n  noWasmDecoding: boolean;\n  quit: (status: number, toThrow: Error) => void;\n  preRun: { (): void }[];\n  print: (a: string) => void;\n  printErr: (a: string) => void;\n  ENV: { [key: string]: string };\n  PATH: any;\n  TTY: any;\n  FS: FS;\n  canvas?: HTMLCanvasElement;\n  addRunDependency: (id: string) => void;\n  removeRunDependency: (id: string) => void;\n}\n\n/**\n * The Emscripten Module.\n *\n * @private\n */\nexport function createModule(): any {\n  let Module: any = {};\n  Module.noImageDecoding = true;\n  Module.noAudioDecoding = true;\n  Module.noWasmDecoding = false; // we preload wasm using the built in plugin now\n  Module.preRun = [];\n  Module.quit = (status: number, toThrow: Error) => {\n    Module.exited = { status, toThrow };\n    throw toThrow;\n  };\n  return Module;\n}\n\n/**\n * Make the home directory inside the virtual file system,\n * then change the working directory to it.\n *\n * @param Module The Emscripten Module.\n * @param path The path to the home directory.\n * @private\n */\nfunction setHomeDirectory(Module: Module, path: string) {\n  Module.preRun.push(function () {\n    const fallbackPath = \"/\";\n    try {\n      Module.FS.mkdirTree(path);\n    } catch (e) {\n      console.error(`Error occurred while making a home directory '${path}':`);\n      console.error(e);\n      console.error(`Using '${fallbackPath}' for a home directory instead`);\n      path = fallbackPath;\n    }\n    Module.ENV.HOME = path;\n    Module.FS.chdir(path);\n  });\n}\n\n/**\n * Mount local directories to the virtual file system. Only for Node.js.\n * @param module The Emscripten Module.\n * @param mounts The list of paths to mount.\n */\nfunction mountLocalDirectories(Module: Module, mounts: string[]) {\n  Module.preRun.push(() => {\n    for (const mount of mounts) {\n      Module.FS.mkdirTree(mount);\n      Module.FS.mount(Module.FS.filesystems.NODEFS, { root: mount }, mount);\n    }\n  });\n}\n\n/**\n * Install the Python standard library to the virtual file system.\n *\n * Previously, this was handled by Emscripten's file packager (pyodide.asm.data).\n * However, using the file packager means that we have only one version\n * of the standard library available. We want to be able to use different\n * versions of the standard library, for example:\n *\n * - Use compiled(.pyc) or uncompiled(.py) standard library.\n * - Remove unused modules or add additional modules using bundlers like pyodide-pack.\n *\n * @param Module The Emscripten Module.\n * @param stdlibPromise A promise that resolves to the standard library.\n */\nfunction installStdlib(Module: Module, stdlibURL: string) {\n  const stdlibPromise: Promise<Uint8Array> = loadBinaryFile(stdlibURL);\n\n  Module.preRun.push(() => {\n    /* @ts-ignore */\n    const pymajor = Module._py_version_major();\n    /* @ts-ignore */\n    const pyminor = Module._py_version_minor();\n\n    Module.FS.mkdirTree(\"/lib\");\n    Module.FS.mkdirTree(`/lib/python${pymajor}.${pyminor}/site-packages`);\n\n    Module.addRunDependency(\"install-stdlib\");\n\n    stdlibPromise\n      .then((stdlib: Uint8Array) => {\n        Module.FS.writeFile(`/lib/python${pymajor}${pyminor}.zip`, stdlib);\n      })\n      .catch((e) => {\n        console.error(\"Error occurred while installing the standard library:\");\n        console.error(e);\n      })\n      .finally(() => {\n        Module.removeRunDependency(\"install-stdlib\");\n      });\n  });\n}\n\n/**\n * Initialize the virtual file system, before loading Python interpreter.\n * @private\n */\nexport function initializeFileSystem(Module: Module, config: ConfigType) {\n  let stdLibURL;\n  if (config.stdLibURL != undefined) {\n    stdLibURL = config.stdLibURL;\n  } else {\n    stdLibURL = config.indexURL + \"python_stdlib.zip\";\n  }\n\n  installStdlib(Module, stdLibURL);\n  setHomeDirectory(Module, config.homedir);\n  mountLocalDirectories(Module, config._node_mounts);\n  Module.preRun.push(() => initializeNativeFS(Module));\n}\n","/**\n * The main bootstrap code for loading pyodide.\n */\nimport ErrorStackParser from \"error-stack-parser\";\nimport { loadScript, initNodeModules, pathSep, resolvePath } from \"./compat\";\n\nimport { createModule, initializeFileSystem } from \"./module\";\nimport { version } from \"./version\";\n\nimport type { PyodideInterface } from \"./api.js\";\nimport type { PyProxy, PyDict } from \"./pyproxy.gen\";\nexport type { PyodideInterface };\n\nexport type {\n  PyProxy,\n  PyProxyWithLength,\n  PyProxyWithGet,\n  PyProxyWithSet,\n  PyProxyWithHas,\n  PyProxyDict,\n  PyProxyIterable,\n  PyProxyIterator,\n  PyProxyAwaitable,\n  PyProxyCallable,\n  TypedArray,\n  PyBuffer as PyProxyBuffer,\n  PyBufferView as PyBuffer,\n} from \"./pyproxy.gen\";\n\nexport type Py2JsResult = any;\n\nexport { version };\n\n/**\n * A proxy around globals that falls back to checking for a builtin if has or\n * get fails to find a global with the given key. Note that this proxy is\n * transparent to js2python: it won't notice that this wrapper exists at all and\n * will translate this proxy to the globals dictionary.\n * @private\n */\nfunction wrapPythonGlobals(globals_dict: PyDict, builtins_dict: PyDict) {\n  return new Proxy(globals_dict, {\n    get(target, symbol) {\n      if (symbol === \"get\") {\n        return (key: any) => {\n          let result = target.get(key);\n          if (result === undefined) {\n            result = builtins_dict.get(key);\n          }\n          return result;\n        };\n      }\n      if (symbol === \"has\") {\n        return (key: any) => target.has(key) || builtins_dict.has(key);\n      }\n      return Reflect.get(target, symbol);\n    },\n  });\n}\n\n/**\n * This function is called after the emscripten module is finished initializing,\n * so eval_code is newly available.\n * It finishes the bootstrap so that once it is complete, it is possible to use\n * the core `pyodide` apis. (But package loading is not ready quite yet.)\n * @private\n */\nfunction finalizeBootstrap(API: any, config: ConfigType) {\n  // First make internal dict so that we can use runPythonInternal.\n  // runPythonInternal uses a separate namespace, so we don't pollute the main\n  // environment with variables from our setup.\n  API.runPythonInternal_dict = API._pyodide._base.eval_code(\"{}\") as PyProxy;\n  API.importlib = API.runPythonInternal(\"import importlib; importlib\");\n  let import_module = API.importlib.import_module;\n\n  API.sys = import_module(\"sys\");\n  API.sys.path.insert(0, config.homedir);\n  API.os = import_module(\"os\");\n\n  // Set up globals\n  let globals = API.runPythonInternal(\n    \"import __main__; __main__.__dict__\",\n  ) as PyDict;\n  let builtins = API.runPythonInternal(\n    \"import builtins; builtins.__dict__\",\n  ) as PyDict;\n  API.globals = wrapPythonGlobals(globals, builtins);\n\n  // Set up key Javascript modules.\n  let importhook = API._pyodide._importhook;\n  importhook.register_js_finder();\n  importhook.register_js_module(\"js\", config.jsglobals);\n\n  let pyodide = API.makePublicAPI();\n  importhook.register_js_module(\"pyodide_js\", pyodide);\n\n  // import pyodide_py. We want to ensure that as much stuff as possible is\n  // already set up before importing pyodide_py to simplify development of\n  // pyodide_py code (Otherwise it's very hard to keep track of which things\n  // aren't set up yet.)\n  API.pyodide_py = import_module(\"pyodide\");\n  API.pyodide_code = import_module(\"pyodide.code\");\n  API.pyodide_ffi = import_module(\"pyodide.ffi\");\n  API.package_loader = import_module(\"pyodide._package_loader\");\n\n  API.sitepackages = API.package_loader.SITE_PACKAGES.__str__();\n  API.dsodir = API.package_loader.DSO_DIR.__str__();\n  API.defaultLdLibraryPath = [API.dsodir, API.sitepackages];\n\n  API.os.environ.__setitem__(\n    \"LD_LIBRARY_PATH\",\n    API.defaultLdLibraryPath.join(\":\"),\n  );\n\n  // copy some last constants onto public API.\n  pyodide.pyodide_py = API.pyodide_py;\n  pyodide.globals = API.globals;\n  return pyodide;\n}\n\ndeclare function _createPyodideModule(Module: any): Promise<void>;\n\n/**\n *  If indexURL isn't provided, throw an error and catch it and then parse our\n *  file name out from the stack trace.\n *\n *  Question: But getting the URL from error stack trace is well... really\n *  hacky. Can't we use\n *  [`document.currentScript`](https://developer.mozilla.org/en-US/docs/Web/API/Document/currentScript)\n *  or\n *  [`import.meta.url`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import.meta)\n *  instead?\n *\n *  Answer: `document.currentScript` works for the browser main thread.\n *  `import.meta` works for es6 modules. In a classic webworker, I think there\n *  is no approach that works. Also we would need some third approach for node\n *  when loading a commonjs module using `require`. On the other hand, this\n *  stack trace approach works for every case without any feature detection\n *  code.\n */\nfunction calculateIndexURL(): string {\n  if (typeof __dirname === \"string\") {\n    return __dirname;\n  }\n  let err: Error;\n  try {\n    throw new Error();\n  } catch (e) {\n    err = e as Error;\n  }\n  let fileName = ErrorStackParser.parse(err)[0].fileName!;\n  const indexOfLastSlash = fileName.lastIndexOf(pathSep);\n  if (indexOfLastSlash === -1) {\n    throw new Error(\n      \"Could not extract indexURL path from pyodide module location\",\n    );\n  }\n  return fileName.slice(0, indexOfLastSlash);\n}\n\n/**\n * See documentation for loadPyodide.\n * @private\n */\nexport type ConfigType = {\n  indexURL: string;\n  lockFileURL: string;\n  homedir: string;\n  fullStdLib?: boolean;\n  stdLibURL?: string;\n  stdin?: () => string;\n  stdout?: (msg: string) => void;\n  stderr?: (msg: string) => void;\n  jsglobals?: object;\n  args: string[];\n  _node_mounts: string[];\n};\n\n/**\n * Load the main Pyodide wasm module and initialize it.\n *\n * @returns The :ref:`js-api-pyodide` module.\n * @memberof globalThis\n * @async\n */\nexport async function loadPyodide(\n  options: {\n    /**\n     * The URL from which Pyodide will load the main Pyodide runtime and\n     * packages. It is recommended that you leave this unchanged, providing an\n     * incorrect value can cause broken behavior.\n     *\n     * Default: The url that Pyodide is loaded from with the file name\n     * (``pyodide.js`` or ``pyodide.mjs``) removed.\n     */\n    indexURL?: string;\n\n    /**\n     * The URL from which Pyodide will load the Pyodide ``repodata.json`` lock\n     * file. You can produce custom lock files with :py:func:`micropip.freeze`.\n     * Default: ```${indexURL}/repodata.json```\n     */\n    lockFileURL?: string;\n\n    /**\n     * The home directory which Pyodide will use inside virtual file system.\n     * Default: ``\"/home/pyodide\"``\n     */\n    homedir?: string;\n    /**\n     * Load the full Python standard library. Setting this to false excludes\n     * unvendored modules from the standard library.\n     * Default: ``false``\n     */\n    fullStdLib?: boolean;\n    /**\n     * The URL from which to load the standard library ``python_stdlib.zip``\n     * file. This URL includes the most of the Python stadard library. Some\n     * stdlib modules were unvendored, and can be loaded separately\n     * with ``fullStdLib=true`` option or by their package name.\n     * Default: ```${indexURL}/python_stdlib.zip```\n     */\n    stdLibURL?: string;\n    /**\n     * Override the standard input callback. Should ask the user for one line of\n     * input.\n     */\n    stdin?: () => string;\n    /**\n     * Override the standard output callback.\n     */\n    stdout?: (msg: string) => void;\n    /**\n     * Override the standard error output callback.\n     */\n    stderr?: (msg: string) => void;\n    /**\n     * The object that Pyodide will use for the ``js`` module.\n     * Default: ``globalThis``\n     */\n    jsglobals?: object;\n    /**\n     * Command line arguments to pass to Python on startup. See `Python command\n     * line interface options\n     * <https://docs.python.org/3.10/using/cmdline.html#interface-options>`_ for\n     * more details. Default: ``[]``\n     */\n    args?: string[];\n    /**\n     * @ignore\n     */\n    _node_mounts?: string[];\n  } = {},\n): Promise<PyodideInterface> {\n  await initNodeModules();\n  let indexURL = options.indexURL || calculateIndexURL();\n  indexURL = resolvePath(indexURL); // A relative indexURL causes havoc.\n  if (!indexURL.endsWith(\"/\")) {\n    indexURL += \"/\";\n  }\n  options.indexURL = indexURL;\n\n  const default_config = {\n    fullStdLib: false,\n    jsglobals: globalThis,\n    stdin: globalThis.prompt ? globalThis.prompt : undefined,\n    homedir: \"/home/pyodide\",\n    lockFileURL: indexURL! + \"repodata.json\",\n    args: [],\n    _node_mounts: [],\n  };\n  const config = Object.assign(default_config, options) as ConfigType;\n\n  const Module = createModule();\n  Module.print = config.stdout;\n  Module.printErr = config.stderr;\n  Module.arguments = config.args;\n  const API: any = { config };\n  Module.API = API;\n\n  initializeFileSystem(Module, config);\n\n  const moduleLoaded = new Promise((r) => (Module.postRun = r));\n\n  // locateFile tells Emscripten where to find the data files that initialize\n  // the file system.\n  Module.locateFile = (path: string) => config.indexURL + path;\n\n  // If the pyodide.asm.js script has been imported, we can skip the dynamic import\n  // Users can then do a static import of the script in environments where\n  // dynamic importing is not allowed or not desirable, like module-type service workers\n  if (typeof _createPyodideModule !== \"function\") {\n    const scriptSrc = `${config.indexURL}pyodide.asm.js`;\n    await loadScript(scriptSrc);\n  }\n\n  // _createPyodideModule is specified in the Makefile by the linker flag:\n  // `-s EXPORT_NAME=\"'_createPyodideModule'\"`\n  await _createPyodideModule(Module);\n\n  // There is some work to be done between the module being \"ready\" and postRun\n  // being called.\n  await moduleLoaded;\n  // Handle early exit\n  if (Module.exited) {\n    throw Module.exited.toThrow;\n  }\n\n  if (API.version !== version) {\n    throw new Error(\n      `\\\nPyodide version does not match: '${version}' <==> '${API.version}'. \\\nIf you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.\\\n`,\n    );\n  }\n  // Disable further loading of Emscripten file_packager stuff.\n  Module.locateFile = (path: string) => {\n    throw new Error(\"Didn't expect to load any more file_packager files!\");\n  };\n\n  let [err, captured_stderr] = API.rawRun(\"import _pyodide_core\");\n  if (err) {\n    Module.API.fatal_loading_error(\n      \"Failed to import _pyodide_core\\n\",\n      captured_stderr,\n    );\n  }\n\n  const pyodide = finalizeBootstrap(API, config);\n\n  // runPython works starting here.\n  if (!pyodide.version.includes(\"dev\")) {\n    // Currently only used in Node to download packages the first time they are\n    // loaded. But in other cases it's harmless.\n    API.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${pyodide.version}/full/`);\n  }\n  await API.packageIndexReady;\n\n  let importhook = API._pyodide._importhook;\n  importhook.register_module_not_found_hook(\n    API._import_name_to_package_name,\n    API.repodata_unvendored_stdlibs_and_test,\n  );\n\n  if (API.repodata_info.version !== version) {\n    throw new Error(\"Lock file version doesn't match Pyodide version\");\n  }\n  API.package_loader.init_loaded_packages();\n  if (config.fullStdLib) {\n    await pyodide.loadPackage(API.repodata_unvendored_stdlibs);\n  }\n  API.initializeStreams(config.stdin, config.stdout, config.stderr);\n  return pyodide;\n}\n","/**\n *\n * The Pyodide version.\n *\n * The version here is a Python version, following :pep:`440`. This is different\n * from the version in ``package.json`` which follows the node package manager\n * version convention.\n */\nexport const version: string = \"0.23.2\";\n","import { loadPyodide, version } from \"./pyodide\";\nexport { loadPyodide, version };\n(globalThis as any).loadPyodide = loadPyodide;\n"],"names":["module","_isNumber","n","isNaN","parseFloat","isFinite","_capitalize","str","charAt","toUpperCase","substring","_getter","p","this","booleanProps","numericProps","stringProps","arrayProps","objectProps","props","concat","StackFrame","obj","i","length","undefined","prototype","getArgs","args","setArgs","v","Object","toString","call","TypeError","getEvalOrigin","evalOrigin","setEvalOrigin","fileName","getFileName","lineNumber","getLineNumber","columnNumber","getColumnNumber","functionName","getFunctionName","getIsEval","fromString","argsStartIndex","indexOf","argsEndIndex","lastIndexOf","split","locationString","parts","exec","Boolean","j","Number","k","String","factory","FIREFOX_SAFARI_STACK_REGEXP","CHROME_IE_STACK_REGEXP","SAFARI_NATIVE_CODE_REGEXP","require$$0","parse","error","stacktrace","parseOpera","stack","match","parseV8OrIE","parseFFOrSafari","Error","extractLocation","urlLike","replace","filter","line","map","sanitizedLine","location","locationParts","source","functionNameRegex","matches","e","message","parseOpera9","parseOpera11","parseOpera10","lineRE","lines","result","len","push","argsRaw","tokens","pop","functionCall","shift","IN_NODE","process","versions","node","browser","nodeUrlMod","nodeFetch","nodePath","nodeVmMod","nodeFsPromisesMod","resolvePath","pathSep","loadBinaryFile","loadScript","path","base","resolve","URL","async","_file_sub_resource_hash","startsWith","slice","includes","response","ok","Uint8Array","arrayBuffer","data","readFile","buffer","byteOffset","byteLength","subResourceHash","url","options","integrity","fetch","globalThis","document","import","importScripts","runInThisContext","text","pathToFileURL","href","__values","o","s","Symbol","iterator","m","next","value","done","__asyncValues","asyncIterator","verb","Promise","reject","d","then","settle","getFsHandles","dirHandle","handles","collect","curDirHandle","_b","values","entry","kind","Map","set","handle","relativePath","join","initializeFileSystem","Module","config","stdLibURL","indexURL","stdlibURL","stdlibPromise","preRun","pymajor","_py_version_major","pyminor","_py_version_minor","FS","mkdirTree","addRunDependency","stdlib","writeFile","catch","console","finally","removeRunDependency","installStdlib","ENV","HOME","chdir","setHomeDirectory","homedir","mounts","mount","filesystems","NODEFS","root","mountLocalDirectories","_node_mounts","MEMFS","PATH","nativeFSAsync","DIR_MODE","FILE_MODE","opts","fileSystemHandle","apply","arguments","syncfs","populate","callback","local","getLocalSet","remote","getRemoteSet","src","dst","reconcile","entries","create","isRealDir","toAbsolute","join2","check","readdir","mountpoint","stat","isDir","mode","timestamp","mtime","type","getFile","lastModifiedDate","Date","loadLocalEntry","lookupPath","isFile","contents","getFileDataAsTypedArray","storeLocalEntry","canOwn","chmod","utime","removeLocalEntry","rmdir","unlink","loadRemoteEntry","file","storeRemoteEntry","parentDirHandle","get","dirname","getFileHandle","basename","getDirectoryHandle","writable","createWritable","write","close","removeRemoteEntry","removeEntry","delete","total","keys","forEach","key","e2","getTime","sort","remove","reverse","relPath","normalize","NATIVEFS_ASYNC","initializeNativeFS","finalizeBootstrap","API","runPythonInternal_dict","_pyodide","_base","eval_code","importlib","runPythonInternal","import_module","sys","insert","os","globals","builtins","builtins_dict","Proxy","target","symbol","has","Reflect","importhook","_importhook","register_js_finder","register_js_module","jsglobals","pyodide","makePublicAPI","pyodide_py","pyodide_code","pyodide_ffi","package_loader","sitepackages","SITE_PACKAGES","__str__","dsodir","DSO_DIR","defaultLdLibraryPath","environ","__setitem__","loadPyodide","default","sep","require","node_modules","fs","crypto","ws","child_process","mod","initNodeModules","__dirname","err","ErrorStackParser","indexOfLastSlash","calculateIndexURL","endsWith","default_config","fullStdLib","stdin","prompt","lockFileURL","assign","status","toThrow","exited","createModule","print","stdout","printErr","stderr","moduleLoaded","r","postRun","locateFile","_createPyodideModule","scriptSrc","version","captured_stderr","rawRun","fatal_loading_error","setCdnUrl","packageIndexReady","register_module_not_found_hook","_import_name_to_package_name","repodata_unvendored_stdlibs_and_test","repodata_info","init_loaded_packages","loadPackage","repodata_unvendored_stdlibs","initializeStreams"],"mappings":"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"}